<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
(function(p,u,s,h){
    p._pcq=p._pcq||[];
    p._pcq.push(['_currentTime',Date.now()]);
    s=u.createElement('script');
    s.type='text/javascript';
    s.async=true;
    s.src='https://cdn.pushcrewstaging.com/js/6547b3374fddaea47512ff5774ad4efc.js';
    h=u.getElementsByTagName('script')[0];
    h.parentNode.insertBefore(s,h);
})(window,document);


//some code here

window._pcq = window._pcq || [];
_pcq.push(['subscriptionSuccessCallback',callbackFunctionOnSuccessfulSubscription]); //registers callback function to be called when user gets successfully subscribed

function callbackFunctionOnSuccessfulSubscription(subscriberId, values) {
    console.log('User got successfully subscribed.');

    console.log(subscriberId); //will output the user's subscriberId

    console.log(values.status); // SUBSCRIBED or ALREADYSUBSCRIBED

    console.log(values.message) // 'User has subscribed to push notifications.' or 'User is already subscribed to push notifications.'

    console.log('Now you may run code which should be executed once user gets successfully subscribed.');
}

_pcq.push(['subscriptionFailureCallback',callbackFunctionOnFailedSubscription]); //registers callback function to be called when user gets successfully subscribed

function callbackFunctionOnFailedSubscription(values) {
    console.log('User could not get subscribed to push notifications');

    console.log(values.status); // BLOCKED , UNSUBSCRIBED or CANCELLED

    console.log(values.message) // 'User has blocked push notifications.', 'User has unsubscribed from push notifications', 'No change in subscription. Child window was closed.' or 'User has closed the notifications opt-in.'

    console.log('Now you may run code which should be executed once user subscription fails');
}

_pcq.push(['removeSubscriberFromSegment', 'homepage', callbackForRemoveFromSegment]);

function callbackForRemoveFromSegment(response) {
    if(response === -1) {
        console.log('User is not a subscriber or has blocked notifications');
    }
  
    if(response === false) {
        console.log('Segment name provided is not valid. Maximum length of segment name can be 30 chars and it can only contain alphanumeric characters, underscore and dash.');
    }
  
    if(response === true) {
        console.log('User got removed from the segment successfully. Now you may run any code you wish to execute after user gets removed from segment successfully');
    }
}
</script>
</head>
<body>
<h1>Hello Folks</h1>
<p>Check out for push notification by PushCrew</p>
</body>
</html>